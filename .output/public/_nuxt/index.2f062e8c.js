import{a as h,aj as b,r as d,o as t,b as i,h as c,e as s,t as n,z as r,F as v,x as g,O as _,P as y,G as p,y as k,aN as w,bg as L,X as $,Y as I}from"./entry.92cc3846.js";import{L as N}from"./index.44e8f268.js";/* empty css              */import{v as G}from"./index.18bc29c4.js";import"./vue.runtime.esm-bundler.08aa84eb.js";const S={layout:"auth",components:{Loading:N},head:{title:"Gramps XML Import"},meta:{permission:{name:"gramps menu"},title:"Gramps - Import"},data:()=>({error:!1,message:"",errors:null,file:void 0,fileName:"",isLoading:!1,fullPage:!0,color:"#4fcf8d",backgroundColor:"#ffffff",response:null,total:100,complete:0}),validations:{fileName:{required:G.required}},computed:{...b(["loggedInUser"])},mounted(){this.subscribeToUploadProgress()},methods:{handleSelectedFiles(e){console.log(this.$refs.fileInput.files[0]),this.file=this.$refs.fileInput.files[0],this.fileName=this.file.name},async submit(){if(this.$v.$touch(),this.$v.$invalid)return-1;this.total=100,this.complete=0,this.isLoading=!0;let e=new FormData;e.append("file",this.file);try{const a=await this.$axios.$post("/api/gramps-import",e,{headers:{"content-type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});this.isLoading=!1,this.response=a[0]}catch(a){this.error=!0,this.message=a.response.data.message,this.errors=a.response.data.errors}},subscribeToUploadProgress(){this.$echo.channel(`user.${this.loggedInUser.id}`).listen(".grampsProgress",e=>{this.total=e.total,this.complete=e.complete})}}},u=e=>($("data-v-fdab0c4b"),e=e(),I(),e),x=L('<div class="columns is-gapless is-multiline is-mobile" data-v-fdab0c4b><div class="column is-12" data-v-fdab0c4b><h1 class="is-size-4 has-text-black" data-v-fdab0c4b><span class="has-text-weight-medium" data-v-fdab0c4b>Gramps XML</span></h1></div><div class="column is-12" data-v-fdab0c4b><nav class="breadcrumb mt-1 mb-0" aria-label="breadcrumbs" data-v-fdab0c4b><ul data-v-fdab0c4b><li data-v-fdab0c4b><a class="is-size-7 has-text-weight-medium has-text-link" href="/dashboard" data-v-fdab0c4b>Home</a></li><li class="is-size-7 has-text-weight-medium is-active" data-v-fdab0c4b><a href="/dashboard" aria-current="page" data-v-fdab0c4b>Gramps XML</a></li></ul></nav></div></div>',1),M={class:"columns is-variable is-3 is-desktop is-flex-desktop-only ai--s"},F={class:"column is-12"},X={class:"card has-background-white has-text-black",style:{height:"500px"}},C={class:"card-content"},P={key:0,class:"notification is-success"},V={key:1,class:"notification is-danger"},q={class:"notification is-danger"},z={key:3,class:"field import_block"},U={class:"file is-large is-boxed has-background-primary"},D={class:"file-label"},T={class:"file-cta"},B={class:"file-label"},O={class:"file-icon"},A=u(()=>s("button",{type:"submit",class:"button theme-button theme-button-xl has-background-primary is-uppercase has-text-weight-medium has-text-white"}," Submit ",-1)),W=u(()=>s("ul",{class:"bullet_list mt-5"},[s("li",null,"We value your privacy and do not share your Gramps data with any third parties. Your Gramps XML file is used by the website only for processing your data and importing into your tree that you have selected."),s("li",null,"One tree is free for life for everyone and if you require more you will need to subscribe which helps us continue to provide services and develop new features."),s("li",null,[p("Please select a Gramps XML file exported from your desktop software or online website and click upload. It should begin to process and show imported data processing. If it stops before fully importing contact "),s("a",{href:"mailto:support@familytree365.com",class:"has-text-link"},"support@familytree365.com")]),s("li",null,"We do not use your Gramps XML file for any other purpose.")],-1));function Y(e,a,j,E,H,l){const m=d("loading"),f=d("font-awesome-icon");return t(),i("div",null,[c(m,{active:e.isLoading,color:e.color,"background-color":e.backgroundColor},null,8,["active","color","background-color"]),x,s("form",{onSubmit:a[2]||(a[2]=w(o=>l.submit(),["prevent"])),enctype:"multipart/form-data"},[s("div",M,[s("div",F,[s("div",X,[s("div",C,[e.response?(t(),i("div",P,n(e.response),1)):r("",!0),e.error?(t(),i("div",V,n(e.message),1)):r("",!0),(t(!0),i(v,null,g(e.errors,o=>(t(),i("div",q,n(o[0]),1))),256)),e.isLoading?r("",!0):_((t(),i("input",{key:2,type:"hidden","onUpdate:modelValue":a[0]||(a[0]=o=>e.fileName=o)},null,512)),[[y,e.fileName]]),e.isLoading?r("",!0):(t(),i("div",z,[s("div",U,[s("label",D,[s("input",{class:"file-input",type:"file",onChange:a[1]||(a[1]=(...o)=>l.handleSelectedFiles&&l.handleSelectedFiles(...o)),name:"file",ref:"fileInput",accept:".ged"},null,544),s("span",T,[s("span",B,[s("span",O,[c(f,{icon:["fas","upload"]})]),p(" Select Gramps XML File ")])])])]),e.$v.fileName.required?r("",!0):(t(),i("p",{key:0,class:k(["help",{"is-danger":e.$v.fileName.$error}])},"Field is required",2))])),A,W])])])])],32)])}const ee=h(S,[["render",Y],["__scopeId","data-v-fdab0c4b"]]);export{ee as default};
