import{l as _,du as $,Q as k,aj as w,a as m,r as h,o as n,b as o,e as a,h as c,t as g,y as v,aN as b,w as S,N as u,I as x,J as E,A as j,i as C,C as q,S as N,O as z,z as d}from"./entry.92cc3846.js";import{f as A}from"./focus.3e4288bb.js";_.add($,k);const B={name:"Submit",inject:["errors","i18n","route","state","toastr"],props:{action:{type:String,required:!0},icon:{type:String,required:!0},endpoint:{type:String,required:!0},payload:{type:Object,required:!0}},data:()=>({loading:!1}),computed:{...w(["isWebview"]),config(){return this.isWebview?{headers:{isWebview:!0}}:{}}},methods:{submit(){this.loading=!0,this.state.successful=!1,this.$emit("submitting"),this.$axios.post(this.route(this.endpoint),this.payload,this.config).then(({data:s})=>{this.state.successful=!0,this.$emit("success",s)}).catch(s=>{const{status:t,data:i}=s.response;switch(t){case 422:this.errors.set(i.errors);break;case 429:this.toastr.error(i.message);break;default:throw s}}).finally(()=>this.loading=!1)}}},D={class:"icon is-small mr-2"};function V(s,t,i,p,f,e){const r=h("fa");return n(),o("button",{class:v(["button is-primary theme-button has-background-primary is-uppercase has-text-weight-medium has-text-white is-fullwidth",{"is-loading":s.loading}]),type:"submit",onClick:t[0]||(t[0]=b((...l)=>e.submit&&e.submit(...l),["prevent"]))},[a("span",D,[c(r,{icon:i.icon},null,8,["icon"])]),a("span",null,g(e.i18n(i.action)),1)],2)}const W=m(B,[["render",V]]);const F={name:"AuthForm",components:{Submit:W},inject:["routerErrorHandler"],data:()=>({state:{successful:!1}}),computed:{...S(["meta"])},provide(){return{state:this.state,errors:this.errors}}},H={class:"auth-form is-gapless is-justify-content-flex-start"},I={class:"mb-5"},O={class:"mb-6"};function G(s,t,i,p,f,e){const r=h("submit");return n(),o("form",{class:"column is-6-tablet is-7-desktop is-7-widescreen is-7-fullhd is-gapless is-flex ai--c",onSubmit:t[0]||(t[0]=b(l=>s.submit(),["prevent"]))},[a("div",H,[a("div",null,[a("div",I,[u(s.$slots,"header")]),u(s.$slots,"default"),a("div",O,[c(r,x(s.$attrs,E(s.$listeners)),null,16)])])]),u(s.$slots,"footer")],32)}const Z=m(F,[["render",G]]);_.add(j,C,q);const J={name:"Email",directives:{focus:A},inject:["errors","i18n","state"],props:{value:{type:String,required:!0}},computed:{successful(){return this.state.successful}}},L={class:"field"},M={class:"control has-icons-left has-icons-right"},P=["value","placeholder"],Q={class:"icon is-large is-left ml-2",style:{height:"100%"}},T={key:0,class:"icon is-small is-right has-text-success pr-2",style:{height:"100%"}},U={key:1,class:"icon is-small is-right has-text-danger"},K={key:0,class:"has-text-danger is-size-7"};function R(s,t,i,p,f,e){const r=h("fa"),l=N("focus");return n(),o("div",L,[a("div",M,[z(a("input",{value:i.value,class:v(["input",{"is-danger":e.errors.has("email"),"is-success":e.successful}]),type:"email",placeholder:e.i18n("Email"),autocomplete:"email",onInput:t[0]||(t[0]=y=>{s.$emit("input",y.target.value),e.errors.clear("email")})},null,42,P),[[l]]),a("span",Q,[c(r,{icon:"envelope"})]),e.successful?(n(),o("span",T,[c(r,{icon:"check"})])):d("",!0),e.errors.has("email")?(n(),o("span",U,[c(r,{icon:"exclamation-triangle"})])):d("",!0)]),e.errors.has("email")?(n(),o("p",K,g(e.errors.get("email")),1)):d("",!0)])}const ss=m(J,[["render",R]]);export{ss as E,Z as _};
