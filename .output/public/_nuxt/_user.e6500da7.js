import{l as y,Q as b,ag as A,m as k,s as x,ah as w,ai as U,q as S,w as h,aj as C,ak as V,a as _,r as u,o as l,b as d,e as s,h as o,G as P,t as i,z as c,c as H,H as I,I as B,J as E}from"./entry.92cc3846.js";import{U as N}from"./Uploader.ba9831ad.js";import{D as j}from"./Divider.5a44f9ec.js";y.add(b,A,k,x,w,U,S);const D={name:"UserProfile",inject:["canAccess","errorHandler","i18n","route","routerErrorHandler"],components:{Uploader:N,Divider:j},data:()=>({profile:null}),computed:{...h(["user","meta","enums","impersonating"]),...h("auth",["isAuth"]),...h("layout",["isMobile"]),...C(["isWebview"]),isSelfVisiting(){return this.user.id===this.profile.id},avatarId(){return this.isSelfVisiting?this.user.avatar.id:this.profile.avatar.id}},created(){this.isAuth&&this.fetch()},methods:{...V(["setUserAvatar"]),fetch(){this.$axios.get(this.route(this.$route.name,this.$route.params.user)).then(e=>this.profile=e.data.user).catch(this.errorHandler)},updateAvatar(){this.$axios.patch(this.route("core.avatars.update",this.user.avatar.id)).then(({data:e})=>this.setUserAvatar(e.avatarId)).catch(this.errorHandler)},dateFormat(e){return e?this.$format(e,this.meta.dateFormat):null}}},F={key:0,class:"box has-background-light p-5 raises-on-hover"},G={class:"title is-4 has-text-centered"},z={class:"icon"},M={key:0},T={class:"columns mt-3"},W={class:"column"},q={class:"image is-128x128 avatar"},J=["src"],L={class:"field is-grouped is-justify-content-center mt-3"},O={class:"control"},Q={class:"icon"},R={class:"control"},K={class:"icon"},X={key:0,class:"control"},Y={class:"icon"},Z={class:"control"},$={class:"icon"},ss={class:"column"},es={class:"columns is-mobile is-multiline details mt-3"},ts={class:"column is-one-third has-text-right py-1 px-2"},is={class:"column is-two-thirds py-1 px-2"},as={class:"column is-one-third has-text-right py-1 px-2"},os={class:"column is-two-thirds py-1 px-2"},rs={class:"column is-one-third has-text-right py-1 px-2"},ns={class:"column is-two-thirds py-1 px-2"},ls={class:"column is-one-third has-text-right py-1 px-2"},cs={class:"column is-two-thirds py-1 px-2"},ds={class:"column is-one-third has-text-right py-1 px-2"},us={class:"column is-two-thirds py-1 px-2"},hs={class:"level is-mobile mt-2"},ps={class:"level-item has-text-centered is-flex-direction-column has-right-border"},_s={class:"subtitle is-4"},ms={class:"subtitle is-5"},fs={class:"level-item has-text-centered is-flex-direction-column"},vs={class:"subtitle is-4"},gs={class:"subtitle is-5"},ys={class:"level-item has-text-centered is-flex-direction-column has-left-border"},bs={class:"subtitle is-4"},As={class:"subtitle is-5"};function ks(e,a,m,f,v,t){const r=u("fa"),p=u("divider"),g=u("uploader");return e.profile?(l(),d("div",F,[s("h4",G,[s("span",z,[o(r,{icon:"user",size:"xs"})]),P(" "+i(e.profile.person.name)+" ",1),e.profile.person.appellative?(l(),d("span",M," ("+i(e.profile.person.appellative)+") ",1)):c("",!0)]),o(p,{class:"my-2"}),s("div",T,[s("div",W,[s("figure",q,[s("img",{class:"is-rounded",src:t.route("core.avatars.show",t.avatarId)},null,8,J)]),s("div",L,[s("p",O,[t.isSelfVisiting?(l(),d("a",{key:0,class:"button is-primary",onClick:a[0]||(a[0]=(...n)=>t.updateAvatar&&t.updateAvatar(...n))},[s("span",Q,[o(r,{icon:"sync-alt"})]),s("span",null,i(t.i18n("Avatar")),1)])):c("",!0)]),s("p",R,[t.isSelfVisiting?(l(),H(g,{key:0,onUploadSuccessful:a[1]||(a[1]=n=>e.setUserAvatar(n.id)),url:t.route("core.avatars.store"),"file-key":"avatar"},{control:I(({controlEvents:n})=>[s("a",B({class:"button is-info"},E(n,!0)),[s("span",K,[o(r,{icon:"upload"})]),s("span",null,i(t.i18n("Avatar")),1)],16)]),_:1},8,["url"])):c("",!0)]),!e.isWebview&&!t.isSelfVisiting&&t.canAccess("core.impersonate.start")&&!e.impersonating?(l(),d("p",X,[s("a",{class:"button is-warning",onClick:a[2]||(a[2]=n=>e.$root.$emit("start-impersonating",e.profile.id))},[s("span",Y,[o(r,{icon:"user-circle"})]),s("span",null,i(t.i18n("Impersonate")),1)])])):c("",!0),s("p",Z,[t.canAccess("administration.users.edit")?(l(),d("a",{key:0,class:"button is-warning",onClick:a[3]||(a[3]=n=>e.$router.push({name:"administration.users.edit",params:{user:e.profile.id}}))},[s("span",$,[o(r,{icon:"pencil-alt"})]),s("span",null,i(t.i18n("Edit")),1)])):c("",!0)])])]),s("div",ss,[s("div",es,[s("div",ts,[s("strong",null,i(t.i18n("Group"))+":",1)]),s("div",is,i(e.profile.group.name),1),s("div",as,[s("strong",null,i(t.i18n("Role"))+":",1)]),s("div",os,i(e.profile.role.name),1),s("div",rs,[s("strong",null,i(t.i18n("Email"))+":",1)]),s("div",ns,i(e.profile.email),1),s("div",ls,[s("strong",null,i(t.i18n("Phone"))+":",1)]),s("div",cs,i(e.profile.person.phone),1),s("div",ds,[s("strong",null,i(t.i18n("Birthday"))+":",1)]),s("div",us,i(t.dateFormat(e.profile.person.birthday)),1)])])]),o(p),s("div",hs,[s("div",ps,[s("p",_s,i(e.profile.loginCount),1),s("p",ms,i(t.i18n("logins")),1)]),s("div",fs,[s("p",vs,i(e.profile.actionLogCount),1),s("p",gs,i(t.i18n("actions")),1)]),s("div",ys,[s("p",bs,i(e.profile.rating),1),s("p",As,i(t.i18n("rating")),1)])])])):c("",!0)}const xs=_(D,[["render",ks],["__scopeId","data-v-2e9b7aa1"]]),ws={meta:{breadcrumb:"show",title:"User Profile"},components:{UserProfile:xs}},Us={class:"columns is-multiline is-centered"},Ss={class:"column is-two-thirds-desktop"};function Cs(e,a,m,f,v,t){const r=u("user-profile");return l(),d("div",Us,[s("div",Ss,[o(r)])])}const Is=_(ws,[["render",Cs]]);export{Is as default};
