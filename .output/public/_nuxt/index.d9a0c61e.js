import{_ as v}from"./nuxt-link.5ccbcf4d.js";import{L as f}from"./index.44e8f268.js";/* empty css              */import{a as g,bx as k,r as m,o as c,b as o,h as l,H as _,G as d,e as s,F as x,x as w,y as C,bg as P,t as u}from"./entry.92cc3846.js";import{_ as z}from"./plan_info_img.dd775b1b.js";import"./vue.runtime.esm-bundler.08aa84eb.js";const L={layout:"default",head:{title:"Paypal"},meta:{breadcrumb:"paypal",title:"Paypal",permission:{name:"subscription menu"}},components:{vSelect:k,Loading:f},data(){return{error:!1,message:"",isLoading:!1,fullPage:!0,color:"#4fcf8d",backgroundColor:"#ffffff",plans:[],selectedPlanId:null,currency_options:["USD","GBP","EUR","AUD"],selected_currency:"GBP",selected_currency_symbol:"£",selected_currency_rate:1}},mounted(){this.loadPlans()},methods:{async loadPlans(){this.isLoading=!0;const t=await this.$axios.get("/api/paypal/plans",{email:"heru0502@gmail.com"});this.plans=t.data,this.isLoading=!1},async selectCurrency(t){this.selected_currency=t,await this.$axios.$get("https://api.currencyfreaks.com/latest?apikey=b864b83a27f5411c804e70762945b59a").then(e=>{switch(console.log(e.rates),t){case"GBP":this.selected_currency_symbol="£",this.selected_currency_rate=1;break;case"USD":this.selected_currency_symbol="$",this.selected_currency_rate=1/e.rates.GBP;break;case"EUR":this.selected_currency_symbol="€",this.selected_currency_rate=e.rates.EUR/e.rates.GBP;break;case"AUD":this.selected_currency_symbol="$",this.selected_currency_rate=e.rates.AUD/e.rates.GBP;break;default:this.selected_currency_symbol="£",this.selected_currency_rate=1;break}}).catch(()=>{})},async subscribe(t){this.isLoading=!0;var e={...t,email:"heru0502@gmail.com",first_name:"Heru",last_name:"dev",selected_currency:this.selected_currency};console.log("LOGGED",e);const n=await this.$axios.$post("/api/paypal/subscribe",e);console.log(n),window.location.href=n,this.isLoading=!1}}},B={class:"currency-div"},D=s("span",null,"Currency: ",-1),G={class:"currency-inside-div"},S=s("div",{class:"column is-12"},[s("h1",{class:"is-size-4 has-text-black"},[s("span",{class:"has-text-weight-medium"},"Subscription")])],-1),U={class:"column is-12"},N={class:"breadcrumb mt-1 mb-0","aria-label":"breadcrumbs"},A=s("li",{class:"is-size-7 has-text-weight-medium is-active"},[s("a",{href:"","aria-current":"page"},"Subscription")],-1),I=s("li",{class:"is-size-7 has-text-weight-medium is-active"},[s("a",{href:"","aria-current":"page"},"Paypal")],-1),E={class:"columns is-variable is-3 is-desktop"},$={class:"column is-9"},F={class:"columns is-multiline is-variable is-3"},V={class:"card has-background-white has-text-black"},H={class:"card-content"},R={class:"is-size-6 has-text-black is-uppercase has-text-weight-bold"},T={class:"is-size-7 has-text-black has-text-weight-regular"},Y={key:0},q=["onClick"],O={key:1},j=["onClick"],J=P('<div class="column is-3"><div class="columns is-gapless is-multiline"><div class="card plan_info_block has-background-primary has-text-black"><img src="'+z+'" alt=""><div class="card-content"><div class="has-text-black has-text-weight-medium is-flex plans_info mb-5"><i class="fas fa-check mr-2 mt-1"></i><p class="is-size-7"> Family Tree 365 is a secure online website which you can use to create your own family tree(s) with. </p></div><div class="has-text-black has-text-weight-medium is-flex plans_info mb-5"><i class="fas fa-check mr-2 mt-1"></i><p class="is-size-7"> It has a tree viewer and DNA support more features are planned such as the inclusion of archive databases &amp; collections </p></div><div class="has-text-black has-text-weight-medium is-flex plans_info"><i class="fas fa-check mr-2 mt-1"></i><p class="is-size-7"> It is aimed to be affordable with a 7 day no obligation trial with different pricing levels depending on how many trees you require. </p></div></div></div></div></div>',1),K=s("div",{class:"modal-background"},null,-1),M={class:"modal-card"},Q={class:"modal-card-head"},W=s("p",{class:"modal-card-title"},"Confirmation",-1),X=s("section",{class:"modal-card-body"},"Are you sure?",-1),Z={class:"modal-card-foot"};function ss(t,e,n,es,a,r){const h=v,b=m("loading"),p=m("vue-select");return c(),o("div",null,[l(h,{class:"is-size-7 has-text-weight-medium has-text-link",to:"/subscription"},{default:_(()=>[d("Stripe")]),_:1}),l(b,{active:a.isLoading,color:a.color,"background-color":a.backgroundColor},null,8,["active","color","background-color"]),s("div",B,[D,s("div",G,[l(p,{options:a.currency_options,placeholder:a.selected_currency,onInput:r.selectCurrency,clearable:!1},null,8,["options","placeholder","onInput"])])]),S,s("div",U,[s("nav",N,[s("ul",null,[s("li",null,[l(h,{class:"is-size-7 has-text-weight-medium has-text-link",to:"dashboard"},{default:_(()=>[d("Home")]),_:1})]),A,I])])]),s("div",E,[s("div",$,[s("div",F,[(c(!0),o(x,null,w(a.plans,i=>(c(),o("div",{class:"column is-6",key:i.id},[s("div",V,[s("div",H,[d(u(a.selected_currency_symbol+(i.amount*a.selected_currency_rate).toFixed(2))+" ",1),s("div",R,u(i.nickname),1),s("div",T,u(i.title),1),i.subscribed===!1?(c(),o("div",Y,[s("button",{onClick:y=>r.subscribe(i),class:"button is-size-7 is-uppercase has-text-white has-background-primary has-text-weight-medium is-light mt-4"}," Subscribe ",8,q)])):(c(),o("div",O,[s("button",{onClick:y=>t.unsubscribePaypal(i),class:"button is-size-7 is-uppercase has-text-white has-background-danger has-text-weight-medium is-light mt-4"}," Unsubscribe ",8,j)]))])])]))),128))])]),J]),s("div",{class:C(["modal",{"is-active":t.isActive}])},[K,s("div",M,[s("header",Q,[W,s("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=i=>t.close())})]),X,s("footer",Z,[a.selectedPlanId!=null?(c(),o("button",{key:0,class:"button is-success",onClick:e[1]||(e[1]=i=>r.subscribe())}," Yes ")):(c(),o("button",{key:1,class:"button is-success",onClick:e[2]||(e[2]=i=>t.unsubscribe())}," Yes ")),s("button",{class:"button",onClick:e[3]||(e[3]=i=>t.close())},"No")])])],2)])}const ns=g(L,[["render",ss]]);export{ns as default};
