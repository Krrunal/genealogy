import{a as p,r as m,o as i,b as n,F as _,x as h,h as k,e as o,y as f,t as r}from"./entry.92cc3846.js";const b={layout:"default",head:{title:"Stripe"},meta:{guestGuard:!0,breadcrumb:"stripe",title:"Stripe"},data(){this.pk={}.STRIPE_PK;const s=new URLSearchParams(window.location.search),e=s.get("price"),a=s.get("state"),l=s.get("id");return a==="success"&&this.confirmCheckout(e,l),{mode:"subscription",loading:!1,lineItems:[{price:e,quantity:1}],successUrl:{}.HOSTNAME+"/planDetail?"+s+"&state=success",cancelUrl:{}.HOSTNAME+"/planDetail?"+s+"&state=cancel",state:a,plans:[]}},methods:{checkout(){this.$refs.checkoutRef.redirectToCheckout()},async getplans(){const s=await this.$axios.$get("/api/get-subscription-plan");this.plans=s.map(e=>(e.nickname=="free"&&(this.selected_plan=e),e))},async confirmCheckout(s,e){await this.$axios.$post("/api/confirm_checkout",{price:s,id:e})}},created(){this.getplans()}},g={class:"checkout"},v={key:0},y={key:1,class:"subscription"},S={class:"subscription-nickname"},x={class:"subscription-title"},C={class:"subscription-amount"};function w(s,e,a,l,t,u){const d=m("stripe-checkout");return i(),n("div",g,[t.state==="success"?(i(),n("div",v,"Confirmed Successfully")):(i(),n("div",y,[(i(!0),n(_,null,h(t.plans,(c,D)=>(i(),n("div",{class:f(["subscription-item",{selected:c.id===t.lineItems[0].price}])},[o("div",S,r(c.nickname),1),o("div",x,r(c.title),1),o("div",C,"Â£"+r(Number(c.amount/100).toFixed(2)),1)],2))),256))])),k(d,{ref:"checkoutRef",pk:s.pk,mode:t.mode,"line-items":t.lineItems,"success-url":t.successUrl,"cancel-url":t.cancelUrl,onLoading:e[0]||(e[0]=c=>t.loading=c)},null,8,["pk","mode","line-items","success-url","cancel-url"]),o("button",{onClick:e[1]||(e[1]=(...c)=>u.checkout&&u.checkout(...c)),class:"submit"},"Submit")])}const N=p(b,[["render",w],["__scopeId","data-v-94d06eed"]]);export{N as default};
