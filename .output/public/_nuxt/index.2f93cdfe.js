import{a as h,aj as v,r as d,o as a,b as i,h as c,e as s,t as n,z as l,F as g,x as b,O as y,P as _,G as u,y as k,aN as w,bg as $,X as N,Y as C}from"./entry.92cc3846.js";import{L as I}from"./index.44e8f268.js";/* empty css              */import{v as S}from"./index.18bc29c4.js";import"./vue.runtime.esm-bundler.08aa84eb.js";const x={layout:"auth",components:{Loading:I},head:{title:"Gedcom Import"},data:()=>({error:!1,message:"",errors:null,file:void 0,fileName:"",isLoading:!1,fullPage:!0,color:"#4fcf8d",backgroundColor:"#ffffff",response:null,total:100,complete:0}),validations:{fileName:{required:S.required}},computed:{...v(["loggedInUser"])},mounted(){this.subscribeToUploadProgress()},methods:{handleSelectedFiles(e){console.log(this.$refs.fileInput.files[0]),this.file=this.$refs.fileInput.files[0],this.fileName=this.file.name},async submit(){if(this.$v.$touch(),this.$v.$invalid)return-1;this.total=100,this.complete=0,this.isLoading=!0;let e=new FormData;e.append("file",this.file),e.append("slug",new Date().getTime());try{const t=await this.$axios.$post("/api/gedcom/store",e,{headers:{"content-type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});this.isLoading=!1,this.response="Successfully Uploaded"}catch(t){this.error=!0,this.isLoading=!1,this.message=t.response.data.message,this.errors=t.response.data.errors}},subscribeToUploadProgress(){this.$echo.channel(`user.${this.loggedInUser.id}`).listen(".gedcomProgress",e=>{this.total=e.total,this.complete=e.complete})}}},p=e=>(N("data-v-5098c8f1"),e=e(),C(),e),D=$('<div class="columns is-gapless is-multiline is-mobile" data-v-5098c8f1><div class="column is-12" data-v-5098c8f1><h1 class="is-size-4 has-text-black" data-v-5098c8f1><span class="has-text-weight-medium" data-v-5098c8f1>Gedcoms</span></h1></div><div class="column is-12" data-v-5098c8f1><nav class="breadcrumb mt-1 mb-0" aria-label="breadcrumbs" data-v-5098c8f1><ul data-v-5098c8f1><li data-v-5098c8f1><a class="is-size-7 has-text-weight-medium has-text-link" href="/dashboard" data-v-5098c8f1>Home</a></li><li class="is-size-7 has-text-weight-medium is-active" data-v-5098c8f1><a href="/dashboard" aria-current="page" data-v-5098c8f1>Gedcoms</a></li></ul></nav></div></div>',1),G={class:"columns is-variable is-3 is-desktop is-flex-desktop-only ai--s"},L={class:"column is-12"},F={class:"card has-background-white has-text-black",style:{height:"500px"}},O={class:"card-content"},M={key:0,class:"notification is-success"},E={key:1,class:"notification is-danger"},P={class:"notification is-danger"},U={key:3,class:"field import_block"},V={class:"file is-large is-boxed has-background-primary"},q={class:"file-label"},z={class:"file-cta"},T={class:"file-label"},B={class:"file-icon"},A=p(()=>s("button",{type:"submit",class:"button theme-button theme-button-xl has-background-primary is-uppercase has-text-weight-medium has-text-white"}," Submit ",-1)),W=p(()=>s("ul",{class:"bullet_list mt-5"},[s("li",null,"We value your privacy and do not share your GEDCOM data with any third parties. Your GEDCOM file is used by the website only for processing your data and importing into your tree that you have selected."),s("li",null,"One tree is free for life for everyone and if you require more you will need to subscribe which helps us continue to provide services and develop new features."),s("li",null,[u("Please select a GEDCOM file exported from your desktop software or online website and click upload. It should begin to process and show imported data processing. If it stops before fully importing contact "),s("a",{href:"mailto:support@familytree365.com",class:"has-text-link"},"support@familytree365.com")]),s("li",null,"We do not use your GEDCOM file for any other purpose.")],-1));function Y(e,t,j,H,X,r){const f=d("loading"),m=d("font-awesome-icon");return a(),i("div",null,[c(f,{active:e.isLoading,color:e.color,"background-color":e.backgroundColor},null,8,["active","color","background-color"]),D,s("form",{onSubmit:t[2]||(t[2]=w(o=>r.submit(),["prevent"])),enctype:"multipart/form-data"},[s("div",G,[s("div",L,[s("div",F,[s("div",O,[e.response?(a(),i("div",M,n(e.response),1)):l("",!0),e.error?(a(),i("div",E,n(e.message),1)):l("",!0),(a(!0),i(g,null,b(e.errors,o=>(a(),i("div",P,n(o[0]),1))),256)),e.isLoading?l("",!0):y((a(),i("input",{key:2,type:"hidden","onUpdate:modelValue":t[0]||(t[0]=o=>e.fileName=o)},null,512)),[[_,e.fileName]]),e.isLoading?l("",!0):(a(),i("div",U,[s("div",V,[s("label",q,[s("input",{class:"file-input",type:"file",onChange:t[1]||(t[1]=(...o)=>r.handleSelectedFiles&&r.handleSelectedFiles(...o)),name:"file",ref:"fileInput",accept:".ged"},null,544),s("span",z,[s("span",T,[s("span",B,[c(m,{icon:["fas","upload"]})]),u(" Select GEDCOM File ")])])])]),e.$v.fileName.required?l("",!0):(a(),i("p",{key:0,class:k(["help",{"is-danger":e.$v.fileName.$error}])},"Field is required",2))])),A,W])])])])],32)])}const ee=h(x,[["render",Y],["__scopeId","data-v-5098c8f1"]]);export{ee as default};
