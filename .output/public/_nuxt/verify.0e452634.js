import{l as m,C as _,A as p,i as g,du as k,Q as y,w as l,a as h,o as i,b as n,e as o,z as u,h as v,H as $,G as x,t as b,ak as c,r as S,c as w}from"./entry.92cc3846.js";import{_ as V}from"./nuxt-link.5ccbcf4d.js";import{f as C}from"./focus.3e4288bb.js";import"./RevealPassword.8886125f.js";import{_ as L}from"./logo1.bf7fdfc5.js";m.add([_,p,g,k,y]);const T={name:"VerifyForm",directives:{focus:C},inject:["i18n","route"],props:{action:{required:!0,type:String},isLogin:{default:!1,type:Boolean},isReset:{default:!1,type:Boolean},route:{required:!0,type:String}},data:()=>({errors:"",isSuccessful:!1,loading:!1}),computed:{...l(["meta"]),token(){return this.route.query.token},postParams(){return this.verifyParams},verifyParams(){const{token:e,loading:s}=this;return{token:e,loading:s}},verifyLink(){return"/api/verify"},resendLink(){return"/api/resend"}},mounted(){this.verify()},methods:{verify(){this.loading=!0,this.isSuccessful=!1,this.$axios.post(this.verifyLink,this.postParams).then(({data:e})=>{this.loading=!1,this.isSuccessful=!0,this.$emit("verified",e)}).catch(e=>{this.loading=!1;const{status:s,data:t}=e.response;switch(s){case 422:this.errors.set(t.errors);break;case 429:this.$toastr.error(t.message);break;default:throw e}})},resend(){this.loading=!0,this.isSuccessful=!1,this.$axios.post(this.resendLink,this.postParams).then(({data:e})=>{this.loading=!1,this.isSuccessful=!0,this.$emit("success",e)}).catch(e=>{this.loading=!1;const{status:s,data:t}=e.response;switch(s){case 422:this.errors.set(t.errors);break;case 429:this.$toastr.error(t.message);break;default:throw e}})}}},B={class:"login"},N={class:"has-padding-medium"},P={class:"title is-3 has-text-black has-text-centered has-margin-bottom-medium"},Q=o("img",{src:L},null,-1),q=[Q],E={class:""},F={key:0,class:"t-center"},G={key:1,class:"t-center"},R={class:"t-center"},j=o("div",{class:"is-clearfix"},null,-1);function z(e,s,t,d,f,a){const r=V;return i(),n("div",B,[o("div",N,[o("h3",P,[o("figure",{class:"image logo is-clickable",onClick:s[0]||(s[0]=M=>e.$router.push({name:"login"}))},q)]),o("div",E,[e.isSuccessful?u("",!0):(i(),n("p",F,"Thank you for registering.")),e.isSuccessful?(i(),n("p",G,"Thank you for using Genealogia.")):u("",!0),o("p",R,[v(r,{to:"/login",class:"button theme-button theme-button-xl has-background-white is-uppercase has-text-weight-medium has-text-dark"},{default:$(()=>[x(b(a.i18n("Log in")),1)]),_:1})])]),j])])}const A=h(T,[["render",z]]),D={name:"Verify",meta:{guestGuard:!0},components:{VerifyForm:A},computed:{...l(["meta"])},methods:{...c("auth",["login"]),...c("layout",["home"]),...c(["setShowQuote","setCsrfToken"]),init(e){this.setShowQuote(this.meta.showQuote),this.setCsrfToken(e.csrfToken),setTimeout(()=>{this.login(),this.home(!0)},3e3)}}};function H(e,s,t,d,f,a){const r=S("verify-form");return i(),w(r,{action:"Resend",onVerified:a.init},null,8,["onVerified"])}const W=h(D,[["render",H]]);export{W as default};
